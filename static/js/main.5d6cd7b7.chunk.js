(this["webpackJsonpcapture-the-flag"]=this["webpackJsonpcapture-the-flag"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a(14)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),o=a.n(r),i=(a(11),a(3)),l=a(2),s=a(1),u=(a(12),a(13),function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return e})).join(" ")});var f=function(e){var t,a=e.className,n=e.teamId,r=e.dx,o=e.dy,i=e.style,l=Math.abs(r),s=Math.abs(o),f=l>.2||s>.2;return t=l>s?r<0?"top":"bottom":o<0?"left":"right",c.a.createElement("div",{className:u("Character","team_".concat(n),f&&"moving",t,a),style:i})},d=new Array(31).fill(0).map((function(e,t){return 1<<t})),m=Object(s.a)(d,16),v=m[0],b=m[1],h=m[2],w=m[3],p=m[4],j=m[5],y=m[6],O=(m[7],m[8]),g=m[9],E=m[10],k=m[11],F=m[12],N=m[13],_=m[14],A=m[15],L=[b,h,w,p,j,y,O,g,E,k,F,N,_,A];var M=function(e){var t=e.mapHeight,a=e.mapWidth,r=e.windowHeight,o=Object(n.useState)([0,0]),d=Object(s.a)(o,2),m=Object(s.a)(d[0],2),M=m[0],S=m[1],I=d[1],R=Object(n.useState)([0,0]),x=Object(s.a)(R,2),H=Object(s.a)(x[0],2),P=H[0],T=H[1],z=x[1],C=Object(n.useState)(0),W=Object(s.a)(C,2),q=W[0],D=W[1],J=Object(n.useState)(2*r|0),B=Object(s.a)(J,2),U=B[0],G=B[1],K=Object(n.useState)(function(e,t){var a=new Array(e).fill(0).map((function(a,n){return new Array(t).fill(0).map((function(a,c){var r=0,o=0===n,i=n===e-1,l=0===c,s=c===t-1;return o&&l?r|=F:o&&s?r|=N:i&&l?r|=_:i&&s?r|=A:o?r|=O:i?r|=g:l?r|=E:s?r|=k:(Math.random()<.01&&(r|=[b,h,w][3*Math.random()|0]),Math.random()<.02&&(r|=p),4!==n&&n!==e-1-4||(r|=y),80===n&&(r|=v)),r}))}));return a[40][t/2|0]|=j,a[e-1-40][t/2|0]|=j,a}(t,a)),Q=Object(s.a)(K,2),V=Q[0],X=(Q[1],Object(n.useState)(!1)),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],ee=Object(n.useState)(!0),te=Object(s.a)(ee,2),ae=te[0],ne=(te[1],Object(n.useState)(0)),ce=Object(s.a)(ne,2),re=ce[0],oe=ce[1],ie="".concat(9.09,"vw");ae&&(r=81,U=81,ie="".concat(1.23,"vw"),P=40,T=0),Object(n.useEffect)((function(){var e=function(e){e.preventDefault(),console.log(e.key);var t=0,a=0;switch(e.key){case"ArrowDown":t++;break;case"ArrowUp":t--;break;case"ArrowLeft":a--;break;case"ArrowRight":a++}I([t/=1.2,a/=1.2])},t=function(e){I([0,0])},a=function(e){e.absolute,e.alpha;var t=e.beta,a=e.gamma;I([-a/180,t/180])},n=function(){G(window.innerHeight/window.innerWidth*r+.5|0)};n();var c=window.setInterval((function(){D(Math.random())}),1e3/30);return document.addEventListener("keydown",e),document.addEventListener("keyup",t),window.addEventListener("resize",n),window.addEventListener("deviceorientation",a,!0),function(){window.clearInterval(c),document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),window.removeEventListener("resize",n),window.removeEventListener("deviceorientation",a)}}),[]),Object(n.useEffect)((function(){if(ae){var e=Math.atan2(S,M),t=re,a=Math.PI/300,n=e-t,c=Math.abs(n);if(0===c)return;c>Math.PI?t-=n/c*a:t+=n/c*a,t%=2*Math.PI,oe(t)}else{var r=P+M,o=T+S,i=V[le+r+.5|0][se+T+.5|0];L.some((function(e){return(e&i)>0}))&&(r=P);var l=V[le+P+.5|0][se+o+.5|0];L.some((function(e){return(e&l)>0}))&&(o=T),z([r,o])}}),[q]);var le=t/2|0,se=a/2|0,ue=r/2|0,fe=U/2|0,de=le+(0|P)-ue,me=se+(0|T)-fe,ve=function(e,t,a,n,c){return(t<0?[].concat(Object(l.a)(new Array(-t).fill(0).map((function(){return new Array(c).fill(0)}))),Object(l.a)(e.slice(0,t+n))):e.slice(t,t+n)).map((function(e){return a<0?[].concat(Object(l.a)(new Array(-a).fill(0)),Object(l.a)(e.slice(0,a+c))):e.slice(a,a+c)}))}(V,de-1,me-1,r+2,U+2),be=(0|P)-P,he=(0|T)-T,we=Object(n.useRef)(null),pe=we.current,je=Object(n.useRef)(null),ye=je.current;if(ye){var Oe,ge=ye.getContext("2d");ge.clearRect(0,0,ye.width,ye.height);var Ee=(Oe={},Object(i.a)(Oe,j,"#ffe300"),Object(i.a)(Oe,y,"#606060"),Object(i.a)(Oe,v,"#808080"),Oe),ke=Object.keys(Ee);V.forEach((function(e,t){e.forEach((function(e,a){var n=ke.find((function(t){return(t&e)>0}));n in Ee&&(ge.fillStyle=Ee[n],ge.fillRect(a-2,t-2,5,5))}))})),ge.fillStyle="#FFFFFF",ge.fillRect(se+(0|T)-1,le+(0|P)-1,3,3),ge.strokeStyle="#FFFFFF",ge.strokeRect(me-1,de-1,U+2,r+2)}return c.a.createElement("div",{className:"App",onTouchStart:function(){return $(!0)},ref:we,onTouchEnd:function(){return $(!1)},onClick:function(){!document.fullscreenElement&&pe&&pe.requestFullscreen&&pe.requestFullscreen().catch(alert)}},c.a.createElement("div",{className:"game"},c.a.createElement("div",{className:u("grid",ae&&"scan"),style:{marginTop:"calc(".concat(be-1," * ").concat(ie,")"),marginLeft:"calc(".concat(he-1," * ").concat(ie,")"),paddingLeft:ae?"calc((100vh - 100vw) / 2)":""}},ve.map((function(e,t){return c.a.createElement("div",{className:"row",key:t},e.map((function(e,a){var n=["divider","rock0","rock1","rock2","tree","tower","jail","key","border_top","border_bottom","border_left","border_right","border_top_left","border_top_right","border_bottom_left","border_bottom_right"].filter((function(t,a){return(e&1<<a)>0}));return n.length>0&&c.a.createElement("div",{className:"col",key:a,style:{left:"calc(".concat(a," * ").concat(ie,")")}},n.map((function(e){return c.a.createElement("div",{key:e,className:u("block",e),style:{zIndex:["divider"].includes(e)?0:P+1<(0|P)-ue+t?2:0}})})))})))}))),!ae&&c.a.createElement(f,{className:"character",teamId:0,dx:M,dy:S,style:{top:"calc(".concat(ue," * ").concat(ie,")"),left:"calc(".concat(fe," * ").concat(ie,")")}}),!ae&&c.a.createElement("div",{className:u("illumination",Z&&"flash"),style:{marginTop:"calc(".concat(ue," * ").concat(ie,")"),marginLeft:"calc(".concat(fe," * ").concat(ie,")")}}),ae&&c.a.createElement("div",{className:"spotlight",style:{transform:"rotate(".concat(re/Math.PI*180,"deg)")}}),!ae&&c.a.createElement("div",{className:"minimap"},c.a.createElement("canvas",{ref:je,className:"canvas",height:t,width:a}))))};o.a.render(c.a.createElement(M,{mapHeight:161,mapWidth:81,windowHeight:11}),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.5d6cd7b7.chunk.js.map